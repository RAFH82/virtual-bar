{"version":3,"sources":["hooks+context/StateProvider.js","firebase.js","ListOfFriends.js","FriendsList.js","images/cocktail.png","images/shattered.png","Header.js","hooks+context/reducer.js","Message.js","ChatInput.js","WhisperInput.js","AddFriend.js","Chat.js","images/logo2.png","Login.js","BarListing.js","Street.js","Table.js","Bar.js","App.js","hooks+context/useBarTable.js","hooks+context/useStatus.js","index.js"],"names":["StateContext","createContext","StateProvider","reducer","initialState","children","Provider","value","useReducer","useStateValue","useContext","db","firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","firestore","auth","provider","GoogleAuthProvider","useStyles","makeStyles","theme","root","flexGrow","minWidth","maxWidth","maxHeight","demo","backgroundColor","palette","background","paper","title","margin","spacing","primary_text","display","fontSize","fontWeight","fontStyle","bar_text","marginRight","table_text","checkbox","color","InteractiveList","friendsList","classes","useState","dense","secondary","setSecondary","friendData","setFriendData","useEffect","collection","where","FieldPath","documentId","onSnapshot","snapshot","docs","map","doc","data","className","FormGroup","row","FormControlLabel","control","Checkbox","checked","onChange","event","target","label","Grid","container","item","xs","md","List","ListItem","ListItemAvatar","Avatar","src","profile_image","ListItemText","disableTypography","primary","Typography","username","at_bar_name","at_table_name","typography","padding","bar__button","position","top","SimplePopover","user","setFriendsList","anchorEl","setAnchorEl","uid","friends","open","Boolean","id","undefined","Button","disableFocusRipple","disableRipple","aria-describedby","variant","onClick","currentTarget","Popover","onClose","anchorReference","anchorPosition","left","anchorOrigin","vertical","horizontal","transformOrigin","toolbar","boxShadow","backgroundImage","Image","grow","menuButton","breakpoints","up","search","borderRadius","shape","fade","common","white","marginLeft","width","searchIcon","height","pointerEvents","alignItems","justifyContent","inputRoot","inputInput","paddingLeft","transition","transitions","create","sectionDesktop","sectionMobile","Header","history","useHistory","React","mobileMoreAnchorEl","setMobileMoreAnchorEl","menuId","isMenuOpen","isMobileMenuOpen","handleMobileMenuClose","clickHome","e","preventDefault","push","logout","window","location","reload","renderMenu","Menu","keepMounted","MenuItem","mobileMenuId","renderMobileMenu","AppBar","Toolbar","noWrap","cocktail","IconButton","edge","aria-label","aria-controls","aria-haspopup","displayName","alt","photoURL","actionTypes","state","action","type","userLocation","idToken","at_bar","at_table","last_bar","last_table","moment","require","Message","timeStamp","fromTz","toTz","message","whisper_part1","whisper_part2","timestamp","userImage","iSent","whisper","UTC","Date","toDate","toUTCString","classString","concat","tz","guess","format","ChatInput","barId","tableId","tableNumber","input","setInput","randomPlaceholder","setRandomPlaceholder","randomChatBoxPlaceholder","Math","floor","random","length","update","isTyping","noValidate","autoComplete","TextField","placeholder","add","FieldValue","serverTimestamp","recipient","link","icon","WhisperInput","recipientName","handleClose","style","AddFriend","friendID","arrayUnion","Chat","dispatch","useParams","tableDetails","setTableDetails","tableMessages","setTableMessages","tableUsers","setTableUsers","barName","setBarName","friendsArray","setFriendsArray","messagesEndRef","useRef","current","scrollIntoView","behavior","joinTimestamp","twoMinAgo","orderBy","set","name","includes","delete","ref","Login","logo","classname","signInWithPopup","then","result","HaversineGeolocation","isGeolocationAvailable","latitude","coords","longitude","replace","catch","error","alert","marginTop","marginBottom","media","BarListing","barIdToken","userIdToken","description","barCreatorId","photo","selectChannel","Card","CardActionArea","CardMedia","image","CardContent","gutterBottom","component","CardActions","size","confirm","Street","atLeastOneBar","channels","setChannels","desc","setDesc","imageUrl","setImageUrl","creatorId","photo_url","Breadcrumbs","Link","table_size","capacity","GeoPoint","channel","locations","getDistanceBetween","closeProximityToUser","Table","tableCreatorId","customTableImage","usersPresent","setUsersPresent","tableIdToken","goToTable","Bar","barDetails","setBarDetails","tables","setTables","leaveBar","randomPhrase","table","App","a","get","snap","useBarTable","currentUser","database","userStatusDatabaseRef","isOfflineForDatabase","last_changed","ServerValue","TIMESTAMP","isOnlineForDatabase","on","val","onDisconnect","userStatusFirestoreRef","isOfflineForFirestore","isOnlineForFirestore","useStatus","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.66a352af.chunk.js","sourcesContent":["import React, { createContext, useContext, useReducer } from \"react\";\n\nexport const StateContext = createContext();\n\nexport const StateProvider = ({ reducer, initialState, children }) => (\n\t<StateContext.Provider value={useReducer(reducer, initialState)}>\n\t\t{children}\n\t</StateContext.Provider>\n);\n\nexport const useStateValue = () => useContext(StateContext);\n","// For Firebase JS SDK v7.20.0 and later, measurementId is optional\nimport firebase from \"firebase\";\n\n// Firebase connection config code.\nconst firebaseConfig = {\n\tapiKey: process.env.REACT_APP_FIREBASEAPIKEY,\n\tauthDomain: \"virtual-bar-9a045.firebaseapp.com\",\n\tprojectId: \"virtual-bar-9a045\",\n\tstorageBucket: \"virtual-bar-9a045.appspot.com\",\n\tmessagingSenderId: \"1053209643695\",\n\tappId: \"1:1053209643695:web:262d567469c7f8cbc9e25a\",\n};\n\n// Set firebase shortcuts\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\nconst db = firebaseApp.firestore();\nconst auth = firebase.auth();\nconst provider = new firebase.auth.GoogleAuthProvider();\n\nexport { auth, provider };\nexport default db;\n","import React, { useState, useEffect } from \"react\";\nimport db from \"./firebase\";\nimport firebase from \"firebase\";\n\n// Material UI\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport FormGroup from \"@material-ui/core/FormGroup\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\n\nconst useStyles = makeStyles((theme) => ({\n\troot: {\n\t\tflexGrow: 1,\n\t\tminWidth: 300,\n\t\tmaxWidth: 400,\n\t\tmaxHeight: 700,\n\t},\n\tdemo: {\n\t\tbackgroundColor: theme.palette.background.paper,\n\t},\n\ttitle: {\n\t\tmargin: theme.spacing(4, 0, 2),\n\t},\n\tprimary_text: {\n\t\tdisplay: \"flex\",\n\t\tfontSize: 20,\n\t\tfontWeight: \"bold\",\n\t\tfontStyle: \"italic\",\n\t},\n\tbar_text: {\n\t\tdisplay: \"inline-block\",\n\t\tfontWeight: \"bold\",\n\t\tfontSize: 18,\n\t\tmarginRight: 4,\n\t},\n\ttable_text: {\n\t\tdisplay: \"inline-block\",\n\t\tfontWeight: \"bold\",\n\t\tfontSize: 18,\n\t\tmarginRight: 4,\n\t},\n\tcheckbox: {\n\t\tcolor: \"#311f34\",\n\t\t\"&$checked\": {\n\t\t\tcolor: \"#311f34\",\n\t\t},\n\t},\n}));\n\nexport default function InteractiveList({ friendsList }) {\n\tconst classes = useStyles();\n\tconst [dense, setDense] = useState(false);\n\tconst [secondary, setSecondary] = useState(false);\n\tconst [friendData, setFriendData] = useState([]);\n\n\tuseEffect(() => {\n\t\tdb.collection(\"users\")\n\t\t\t.where(firebase.firestore.FieldPath.documentId(), \"in\", friendsList)\n\t\t\t.where(\"state\", \"==\", \"online\")\n\t\t\t.onSnapshot((snapshot) => {\n\t\t\t\tsetFriendData(snapshot.docs.map((doc) => doc.data()));\n\t\t\t});\n\t}, []);\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<FormGroup row>\n\t\t\t\t<FormControlLabel\n\t\t\t\t\tclassName={classes.checkbox}\n\t\t\t\t\tcontrol={\n\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\tclassName={classes.checkbox}\n\t\t\t\t\t\t\tchecked={secondary}\n\t\t\t\t\t\t\tonChange={(event) => setSecondary(event.target.checked)}\n\t\t\t\t\t\t\tcolor=\"\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\tlabel=\"Location\"\n\t\t\t\t/>\n\t\t\t</FormGroup>\n\t\t\t<Grid container spacing={2}>\n\t\t\t\t<Grid item xs={12} md={13}>\n\t\t\t\t\t<div className={classes.demo}>\n\t\t\t\t\t\t<List dense={dense}>\n\t\t\t\t\t\t\t{friendData.map((friendData) => (\n\t\t\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t\t\t<ListItemAvatar>\n\t\t\t\t\t\t\t\t\t\t<Avatar src={friendData?.profile_image} />\n\t\t\t\t\t\t\t\t\t</ListItemAvatar>\n\t\t\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\t\t\tdisableTypography\n\t\t\t\t\t\t\t\t\t\tprimary={\n\t\t\t\t\t\t\t\t\t\t\t<Typography className={classes.primary_text}>\n\t\t\t\t\t\t\t\t\t\t\t\t{friendData?.username}\n\t\t\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tsecondary={\n\t\t\t\t\t\t\t\t\t\t\tsecondary ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Typography className={classes.bar_text}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{`Bar: `}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{friendData?.at_bar_name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<br></br>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Typography className={classes.table_text}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{`Table: `}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{friendData?.at_table_name}\n\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t<></>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</List>\n\t\t\t\t\t</div>\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t</div>\n\t);\n}\n","import React, { useState, useEffect } from \"react\";\nimport { useStateValue } from \"./hooks+context/StateProvider\";\nimport db from \"./firebase\";\nimport ListOfFriends from \"./ListOfFriends\";\n\n// Material UI\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Popover from \"@material-ui/core/Popover\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\n\n// Custom CSS\nimport \"./FriendsList.css\";\n\n// Material UI styles\nconst useStyles = makeStyles((theme) => ({\n\ttypography: {\n\t\tpadding: theme.spacing(2),\n\t},\n\tbar__button: {\n\t\tposition: \"relative\",\n\t\ttop: 12,\n\t\tbackgroundColor: \"#000\",\n\t\tcolor: \"#fff\",\n\t\t\"&:hover\": {\n\t\t\tbackground: \"#fff\",\n\t\t\tcolor: \"#000\",\n\t\t},\n\t},\n}));\n\nexport default function SimplePopover() {\n\tconst [{ user }] = useStateValue();\n\tconst [friendsList, setFriendsList] = useState([]);\n\tconst classes = useStyles();\n\tconst [anchorEl, setAnchorEl] = useState(null);\n\n\tuseEffect(() => {\n\t\tdb.collection(\"users\")\n\t\t\t.doc(user.uid)\n\t\t\t.onSnapshot((snapshot) => {\n\t\t\t\tsetFriendsList(snapshot.data().friends);\n\t\t\t});\n\t}, [user]);\n\n\tconst handleClick = (event) => {\n\t\tsetAnchorEl(event.currentTarget);\n\t};\n\n\tconst handleClose = () => {\n\t\tsetAnchorEl(null);\n\t};\n\n\tconst open = Boolean(anchorEl);\n\tconst id = open ? \"simple-popover\" : undefined;\n\n\treturn (\n\t\t<div>\n\t\t\t<Button\n\t\t\t\tclassName={classes.bar__button}\n\t\t\t\tdisableFocusRipple={true}\n\t\t\t\tdisableRipple={true}\n\t\t\t\taria-describedby={id}\n\t\t\t\tvariant=\"contained\"\n\t\t\t\tcolor=\"primary\"\n\t\t\t\tonClick={handleClick}\n\t\t\t>\n\t\t\t\tOnline Friends\n\t\t\t</Button>\n\t\t\t<Popover\n\t\t\t\tid={id}\n\t\t\t\topen={open}\n\t\t\t\tanchorEl={anchorEl}\n\t\t\t\tonClose={handleClose}\n\t\t\t\tanchorReference=\"anchorPosition\"\n\t\t\t\tanchorPosition={{ top: 50, left: 1365 }}\n\t\t\t\tanchorOrigin={{\n\t\t\t\t\tvertical: \"bottom\",\n\t\t\t\t\thorizontal: \"center\",\n\t\t\t\t}}\n\t\t\t\ttransformOrigin={{\n\t\t\t\t\tvertical: \"top\",\n\t\t\t\t\thorizontal: \"center\",\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Typography className={classes.typography}>\n\t\t\t\t\t<ListOfFriends friendsList={friendsList} />\n\t\t\t\t</Typography>\n\t\t\t</Popover>\n\t\t</div>\n\t);\n}\n","export default __webpack_public_path__ + \"static/media/cocktail.27c40d7c.png\";","export default __webpack_public_path__ + \"static/media/shattered.6e5e9717.png\";","// React\nimport React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useStateValue } from \"./hooks+context/StateProvider\";\nimport FriendsList from \"./FriendsList\";\n\n// Material UI Imports\nimport { Avatar } from \"@material-ui/core\";\nimport { fade, makeStyles } from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Typography from \"@material-ui/core/Typography\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MoreIcon from \"@material-ui/icons/MoreVert\";\nimport FiberManualRecordIcon from \"@material-ui/icons/FiberManualRecord\";\n\n// Logo\nimport cocktail from \"./images/cocktail.png\";\n\n// Custom CSS\nimport \"./Header.css\";\nimport Image from \"./images/shattered.png\";\n\n// Material UI Styles\nconst useStyles = makeStyles((theme) => ({\n\ttoolbar: {\n\t\tbackgroundColor: \"#1e0521\",\n\t\tboxShadow: \"inset 0 0 0 2000px rgba(30, 5, 33, 0.6)\",\n\t\tbackgroundImage: `url(${Image})`,\n\t},\n\tgrow: {\n\t\tflexGrow: 1,\n\t},\n\tmenuButton: {\n\t\tmarginRight: theme.spacing(2),\n\t},\n\ttitle: {\n\t\tdisplay: \"none\",\n\t\t[theme.breakpoints.up(\"sm\")]: {\n\t\t\tdisplay: \"block\",\n\t\t},\n\t},\n\tsearch: {\n\t\tposition: \"relative\",\n\t\tborderRadius: theme.shape.borderRadius,\n\t\tbackgroundColor: fade(theme.palette.common.white, 0.15),\n\t\t\"&:hover\": {\n\t\t\tbackgroundColor: fade(theme.palette.common.white, 0.25),\n\t\t},\n\t\tmarginRight: theme.spacing(2),\n\t\tmarginLeft: 0,\n\t\twidth: \"100%\",\n\t\t[theme.breakpoints.up(\"sm\")]: {\n\t\t\tmarginLeft: theme.spacing(3),\n\t\t\twidth: \"auto\",\n\t\t},\n\t},\n\tsearchIcon: {\n\t\tpadding: theme.spacing(0, 2),\n\t\theight: \"100%\",\n\t\tposition: \"absolute\",\n\t\tpointerEvents: \"none\",\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t\tjustifyContent: \"center\",\n\t},\n\tinputRoot: {\n\t\tcolor: \"inherit\",\n\t},\n\tinputInput: {\n\t\tpadding: theme.spacing(1, 1, 1, 0),\n\t\t// vertical padding + font size from searchIcon\n\t\tpaddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\n\t\ttransition: theme.transitions.create(\"width\"),\n\t\twidth: \"100%\",\n\t\t[theme.breakpoints.up(\"md\")]: {\n\t\t\twidth: \"20ch\",\n\t\t},\n\t},\n\tsectionDesktop: {\n\t\tdisplay: \"none\",\n\t\t[theme.breakpoints.up(\"md\")]: {\n\t\t\tdisplay: \"flex\",\n\t\t},\n\t},\n\tsectionMobile: {\n\t\tdisplay: \"flex\",\n\t\t[theme.breakpoints.up(\"md\")]: {\n\t\t\tdisplay: \"none\",\n\t\t},\n\t},\n}));\n\nfunction Header() {\n\tconst [{ user }] = useStateValue();\n\tconst history = useHistory();\n\tconst [anchorEl, setAnchorEl] = React.useState(null);\n\tconst [mobileMoreAnchorEl, setMobileMoreAnchorEl] = React.useState(null);\n\n\t// Material UI\n\tconst classes = useStyles();\n\tconst menuId = \"primary-search-account-menu\";\n\tconst isMenuOpen = Boolean(anchorEl);\n\tconst isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\n\n\tconst handleProfileMenuOpen = (event) => {\n\t\tsetAnchorEl(event.currentTarget);\n\t};\n\n\tconst handleMobileMenuClose = () => {\n\t\tsetMobileMoreAnchorEl(null);\n\t};\n\n\tconst handleMenuClose = () => {\n\t\tsetAnchorEl(null);\n\t\thandleMobileMenuClose();\n\t};\n\n\tconst handleMobileMenuOpen = (event) => {\n\t\tsetMobileMoreAnchorEl(event.currentTarget);\n\t};\n\n\t// Logout and Home\n\tconst clickHome = (e) => {\n\t\te.preventDefault();\n\t\thistory.push(\"/\");\n\t};\n\n\tconst logout = () => {\n\t\twindow.location.reload(false);\n\t};\n\n\t// Material UI drop-down menu for logout\n\tconst renderMenu = (\n\t\t<Menu\n\t\t\tanchorEl={anchorEl}\n\t\t\tanchorReference=\"anchorPosition\"\n\t\t\tanchorPosition={{ top: 60, left: 1655 }}\n\t\t\tanchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\n\t\t\tid={menuId}\n\t\t\tkeepMounted\n\t\t\ttransformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\n\t\t\topen={isMenuOpen}\n\t\t\tonClose={handleMenuClose}\n\t\t>\n\t\t\t<MenuItem onClick={logout}>Logout</MenuItem>\n\t\t</Menu>\n\t);\n\n\t// Material UI mobile size\n\tconst mobileMenuId = \"primary-search-account-menu-mobile\";\n\tconst renderMobileMenu = (\n\t\t<Menu\n\t\t\tanchorEl={mobileMoreAnchorEl}\n\t\t\tanchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\n\t\t\tid={mobileMenuId}\n\t\t\tkeepMounted\n\t\t\ttransformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\n\t\t\topen={isMobileMenuOpen}\n\t\t\tonClose={handleMobileMenuClose}\n\t\t>\n\t\t\t<MenuItem onClick={logout}>Logout</MenuItem>\n\t\t</Menu>\n\t);\n\n\treturn (\n\t\t<div className={classes.grow}>\n\t\t\t<AppBar position=\"static\">\n\t\t\t\t<Toolbar className={classes.toolbar}>\n\t\t\t\t\t<Typography\n\t\t\t\t\t\tclassName={classes.title}\n\t\t\t\t\t\tonClick={clickHome}\n\t\t\t\t\t\tvariant=\"h6\"\n\t\t\t\t\t\tnoWrap\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"nav__title\">VIRTUAL BAR</div>\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<div onClick={clickHome} className=\"nav__cocktail\">\n\t\t\t\t\t\t<img src={cocktail} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={classes.grow} />\n\t\t\t\t\t<div className={classes.sectionDesktop}>\n\t\t\t\t\t\t<FriendsList />\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tedge=\"end\"\n\t\t\t\t\t\t\taria-label=\"account of current user\"\n\t\t\t\t\t\t\taria-controls={menuId}\n\t\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\t\tonClick={handleProfileMenuOpen}\n\t\t\t\t\t\t\tcolor=\"inherit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"icon__online\">\n\t\t\t\t\t\t\t\t<FiberManualRecordIcon />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\t\tclassName={(classes.title, \"avatar__name\")}\n\t\t\t\t\t\t\t\tvariant=\"h6\"\n\t\t\t\t\t\t\t\tnoWrap\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{user?.displayName}\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\tclassName=\"header__avatar\"\n\t\t\t\t\t\t\t\talt={user?.displayName}\n\t\t\t\t\t\t\t\tsrc={user?.photoURL}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={classes.sectionMobile}>\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\taria-label=\"show more\"\n\t\t\t\t\t\t\taria-controls={mobileMenuId}\n\t\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\t\tonClick={handleMobileMenuOpen}\n\t\t\t\t\t\t\tcolor=\"inherit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<MoreIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</div>\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t\t{renderMobileMenu}\n\t\t\t{renderMenu}\n\t\t</div>\n\t);\n}\n\nexport default Header;\n","export const initialState = {\n\tuser: null,\n\tuserLocation: null,\n\tidToken: null,\n\tat_bar: null,\n\tat_table: null,\n\tlast_bar: null,\n\tlast_table: null,\n};\n\nexport const actionTypes = {\n\tSET_USER: \"SET_USER\",\n\tSET_BAR_AND_TABLE: \"SET_BAR_AND_TABLE\",\n\tLEAVE_BAR_OR_TABLE: \"LEAVE_BAR_OR_TABLE\",\n};\n\nconst reducer = (state, action) => {\n\tswitch (action.type) {\n\t\tcase actionTypes.SET_USER:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tuser: action.user,\n\t\t\t\tuserLocation: action.location,\n\t\t\t\tidToken: action.idToken,\n\t\t\t};\n\t\tcase actionTypes.SET_BAR_AND_TABLE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tat_bar: action.at_bar,\n\t\t\t\tat_table: action.at_table,\n\t\t\t\tlast_bar: action.at_bar,\n\t\t\t\tlast_table: action.at_table,\n\t\t\t};\n\t\tcase actionTypes.LEAVE_BAR_OR_TABLE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tat_bar: action.at_bar,\n\t\t\t\tat_table: action.at_table,\n\t\t\t};\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default reducer;\n","import React from \"react\";\nimport \"./Message.css\";\n\nconst moment = require(\"moment-timezone\");\n\nfunction Message({\n\tmessage,\n\twhisper_part1,\n\twhisper_part2,\n\tuser,\n\ttimestamp,\n\tuserImage,\n\tiSent,\n\twhisper,\n}) {\n\t// Format time stamp -------------\n\tfunction utcTimeChange(timeStamp, fromTz, toTz) {\n\t\tconst newDate = moment\n\t\t\t.tz(timeStamp, fromTz)\n\t\t\t.tz(toTz)\n\t\t\t.format(\"YYYY-MM-DD LT\");\n\t\treturn newDate;\n\t}\n\n\tconst UTC = new Date(timestamp?.toDate()).toUTCString();\n\n\t// Set message classes -----------\n\tlet classString = \"\";\n\tif (iSent) {\n\t\tclassString = classString.concat(\"message__bubble bubble__lip \");\n\t} else {\n\t\tclassString = classString.concat(\"message__bubble__alt bubble__lip__alt \");\n\t}\n\tif (whisper) {\n\t\tclassString = classString.concat(\"whisper__bubble\");\n\t}\n\t// -------------------------------\n\n\treturn (\n\t\t<div className=\"message container\">\n\t\t\t<img src={userImage} alt=\"\" />\n\t\t\t<div className=\"message__info\">\n\t\t\t\t<p>\n\t\t\t\t\t<b>{user}</b>\n\t\t\t\t\t<span className=\"message__timestamp\">\n\t\t\t\t\t\t{utcTimeChange(UTC, \"Europe/London\", moment.tz.guess())}\n\t\t\t\t\t</span>\n\t\t\t\t</p>\n\t\t\t\t<div className={classString}>\n\t\t\t\t\t<p>{message}</p>\n\t\t\t\t\t<p className=\"msg__part1\">{whisper_part1}</p>\n\t\t\t\t\t<p>{whisper_part2}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Message;\n","// React, hooks and state\nimport React, { useState, useEffect } from \"react\";\nimport { useStateValue } from \"./hooks+context/StateProvider\";\n\n//Firebase\nimport db from \"./firebase\";\nimport firebase from \"firebase\";\n\n// Style\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport TextField from \"@material-ui/core/TextField\";\nimport \"./ChatInput.css\";\n\nconst useStyles = makeStyles((theme) => ({\n\troot: {\n\t\t\"& > *\": {\n\t\t\tmargin: theme.spacing(1),\n\t\t\twidth: \"99%\",\n\t\t},\n\t},\n}));\n\n// Primary ChatInput function\nfunction ChatInput({ barId, tableId, tableNumber }) {\n\tconst [{ user }] = useStateValue();\n\tconst [input, setInput] = useState(\"\");\n\tconst [randomPlaceholder, setRandomPlaceholder] = useState(\"\");\n\tconst classes = useStyles();\n\n\t// Place random placeholder in chat field\n\tuseEffect(() => {\n\t\tconst randomChatBoxPlaceholder = [\n\t\t\t\"Who has better arms? The Rock, or Michelle Oboma? Discuss...\",\n\t\t\t\"This one time at band camp...\",\n\t\t\t\"Would you ever sing with a banana at the dinner table?\",\n\t\t\t\"Tell your best Chuck Norris joke...\",\n\t\t\t\"What are you going to do this weekend?\",\n\t\t\t\"Is a hotdog a sandwich? Why or why not?\",\n\t\t\t\"Is cereal soup? Why or why not?\",\n\t\t\t\"What’s the best type of cheese?\",\n\t\t\t\"How many chickens would it take to kill an elephant?\",\n\t\t\t\"What’s the best inside joke you’ve been a part of?\",\n\t\t\t\"What would the world be like if it was filled with male and female copies of you?\",\n\t\t\t\"Where was the most inappropriate / most embarrassing place you’ve farted?\",\n\t\t\t\"What is the weirdest thing you have seen in someone else’s home?\",\n\t\t\t\"Convince everyone to play shot-glass checkers with you on Zoom!\",\n\t\t];\n\n\t\tsetRandomPlaceholder(\n\t\t\trandomChatBoxPlaceholder[\n\t\t\t\tMath.floor(Math.random() * randomChatBoxPlaceholder.length)\n\t\t\t]\n\t\t);\n\t}, []);\n\n\t// Set the className string for the chat bubble for send/recieve message and main/whisper message\n\tuseEffect(() => {\n\t\tif (input !== \"\") {\n\t\t\tdb.collection(\"bars\")\n\t\t\t\t.doc(barId)\n\t\t\t\t.collection(\"tables\")\n\t\t\t\t.doc(tableId)\n\t\t\t\t.collection(\"usersAtTable\")\n\t\t\t\t.doc(user.uid)\n\t\t\t\t.update({\n\t\t\t\t\tisTyping: true,\n\t\t\t\t});\n\t\t} else {\n\t\t\tdb.collection(\"bars\")\n\t\t\t\t.doc(barId)\n\t\t\t\t.collection(\"tables\")\n\t\t\t\t.doc(tableId)\n\t\t\t\t.collection(\"usersAtTable\")\n\t\t\t\t.doc(user.uid)\n\t\t\t\t.update({\n\t\t\t\t\tisTyping: false,\n\t\t\t\t});\n\t\t}\n\t}, [input]);\n\n\t// Save a sent message to the database\n\tconst sendMessage = (event) => {\n\t\tevent.preventDefault();\n\n\t\tif (input) {\n\t\t\tdb.collection(\"bars\")\n\t\t\t\t.doc(barId)\n\t\t\t\t.collection(\"tables\")\n\t\t\t\t.doc(tableId)\n\t\t\t\t.collection(\"messages\")\n\t\t\t\t.add({\n\t\t\t\t\tmessage: input,\n\t\t\t\t\ttimestamp: firebase.firestore.FieldValue.serverTimestamp(),\n\t\t\t\t\tuser: user.displayName,\n\t\t\t\t\trecipient: [\"all\"],\n\t\t\t\t\tuserImage: user.photoURL,\n\t\t\t\t});\n\n\t\t\tdb.collection(\"bars\")\n\t\t\t\t.doc(barId)\n\t\t\t\t.collection(\"tables\")\n\t\t\t\t.doc(tableId)\n\t\t\t\t.collection(\"usersAtTable\")\n\t\t\t\t.doc(user.uid)\n\t\t\t\t.update({\n\t\t\t\t\tisTyping: false,\n\t\t\t\t});\n\t\t}\n\n\t\tsetInput(\"\");\n\t};\n\n\t// Render the Chat Input\n\treturn (\n\t\t<div className=\"chatInput\">\n\t\t\t<form className={classes.root} noValidate autoComplete=\"off\">\n\t\t\t\t<TextField\n\t\t\t\t\tid=\"outlined-basic\"\n\t\t\t\t\tlabel={randomPlaceholder}\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tvalue={input}\n\t\t\t\t\tonChange={(event) => setInput(event.target.value)}\n\t\t\t\t\tplaceholder={`Message Table #${tableNumber}`}\n\t\t\t\t/>\n\t\t\t\t<button type=\"submit\" onClick={sendMessage}></button>\n\t\t\t</form>\n\t\t</div>\n\t);\n}\n\nexport default ChatInput;\n","// React\nimport React, { useState } from \"react\";\nimport { useStateValue } from \"./hooks+context/StateProvider\";\nimport db from \"./firebase\";\nimport firebase from \"firebase\";\n\n// Material UI\nimport TextField from \"@material-ui/core/TextField\";\nimport Popover from \"@material-ui/core/Popover\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\n\n// Custom styles\nimport \"./WhisperInput.css\";\nimport CommentIcon from \"@material-ui/icons/Comment\";\nimport white from \"@material-ui/core/colors/red\";\n\n//Material UI styles\nconst useStyles = makeStyles((theme) => ({\n\troot: {\n\t\t\"& > *\": {\n\t\t\tmargin: theme.spacing(1),\n\t\t\twidth: \"25ch\",\n\t\t},\n\t},\n\ttypography: {\n\t\tpadding: theme.spacing(2),\n\t},\n\tlink: {\n\t\tdisplay: \"flex\",\n\t},\n\ticon: {\n\t\tmarginRight: theme.spacing(0.5),\n\t\twidth: 20,\n\t\theight: 20,\n\t},\n}));\n\nfunction WhisperInput({ recipientName, barId, tableId, uid }) {\n\tconst [input, setInput] = useState(\"\");\n\tconst [{ user }] = useStateValue();\n\tconst [anchorEl, setAnchorEl] = useState(null);\n\tconst classes = useStyles();\n\n\tconst sendMessage = (event) => {\n\t\tevent.preventDefault();\n\t\tif (input) {\n\t\t\tdb.collection(\"bars\")\n\t\t\t\t.doc(barId)\n\t\t\t\t.collection(\"tables\")\n\t\t\t\t.doc(tableId)\n\t\t\t\t.collection(\"messages\")\n\t\t\t\t.add({\n\t\t\t\t\twhisper_part1: `(Whisper from ${user.displayName})`,\n\t\t\t\t\twhisper_part2: `${input}`,\n\t\t\t\t\ttimestamp: firebase.firestore.FieldValue.serverTimestamp(),\n\t\t\t\t\tuser: user.displayName,\n\t\t\t\t\trecipient: [uid],\n\t\t\t\t\tuserImage: user.photoURL,\n\t\t\t\t});\n\n\t\t\tdb.collection(\"bars\")\n\t\t\t\t.doc(barId)\n\t\t\t\t.collection(\"tables\")\n\t\t\t\t.doc(tableId)\n\t\t\t\t.collection(\"messages\")\n\t\t\t\t.add({\n\t\t\t\t\twhisper_part1: `(Whisper to ${recipientName})`,\n\t\t\t\t\twhisper_part2: `${input}`,\n\t\t\t\t\ttimestamp: firebase.firestore.FieldValue.serverTimestamp(),\n\t\t\t\t\tuser: user.displayName,\n\t\t\t\t\trecipient: [user.uid],\n\t\t\t\t\tuserImage: user.photoURL,\n\t\t\t\t});\n\t\t}\n\n\t\tsetInput(\"\");\n\t\thandleClose();\n\t};\n\n\t// start of code for whisper popup input\n\t// ----------------------------------------\n\n\tconst handleClick = (event) => {\n\t\tsetAnchorEl(event.currentTarget);\n\t};\n\n\tconst handleClose = () => {\n\t\tsetAnchorEl(null);\n\t};\n\n\tconst open = Boolean(anchorEl);\n\tconst id = open ? \"simple-popover\" : undefined;\n\t// --------------------------------------\n\t// end of code for whisper popup input\n\n\treturn (\n\t\t<div className=\"whisperInput\">\n\t\t\t<div className=\"whisper__tooltip\">\n\t\t\t\t<CommentIcon\n\t\t\t\t\tclassName=\"whisper__button\"\n\t\t\t\t\tid=\"form_close\"\n\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\tstyle={{ color: white }}\n\t\t\t\t\tonClick={handleClick}\n\t\t\t\t\tdisableFocusRipple={true}\n\t\t\t\t\tdisableRipple={true}\n\t\t\t\t/>\n\t\t\t\t<span className=\"tooltiptext\">Whisper {recipientName}</span>\n\t\t\t</div>\n\t\t\t<Popover\n\t\t\t\tid={id}\n\t\t\t\topen={open}\n\t\t\t\tanchorEl={anchorEl}\n\t\t\t\tonClose={handleClose}\n\t\t\t\tanchorOrigin={{\n\t\t\t\t\tvertical: \"bottom\",\n\t\t\t\t\thorizontal: \"center\",\n\t\t\t\t}}\n\t\t\t\ttransformOrigin={{\n\t\t\t\t\tvertical: \"top\",\n\t\t\t\t\thorizontal: \"center\",\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Typography className={classes.typography}>\n\t\t\t\t\t<form className={classes.root} noValidate autoComplete=\"off\">\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tid=\"outlined-basic\"\n\t\t\t\t\t\t\tlabel={`Whisper ${recipientName}`}\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\tonChange={(event) => setInput(event.target.value)}\n\t\t\t\t\t\t\tvalue={input}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tid=\"input__whisper__box\"\n\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\tonClick={sendMessage}\n\t\t\t\t\t\t\t></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t</Typography>\n\t\t\t</Popover>\n\t\t</div>\n\t);\n}\n\nexport default WhisperInput;\n","// React\nimport React, { useState } from \"react\";\nimport { useStateValue } from \"./hooks+context/StateProvider\";\nimport db from \"./firebase\";\n\n// Firebase\nimport firebase from \"firebase\";\n\n// Material UI\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport AddIcon from \"@material-ui/icons/Add\";\n\n// Custom styles\nimport \"./AddFriend.css\";\n\n//Material UI styles\nconst useStyles = makeStyles((theme) => ({\n\troot: {\n\t\t\"& > *\": {\n\t\t\tmargin: theme.spacing(1),\n\t\t\twidth: \"25ch\",\n\t\t},\n\t},\n}));\n\nfunction AddFriend({ friendID }) {\n\tconst [{ user }] = useStateValue();\n\tconst classes = useStyles();\n\n\tconst addFriendToList = (e) => {\n\t\te.preventDefault();\n\t\tdb.collection(\"users\")\n\t\t\t.doc(user.uid)\n\t\t\t.update({\n\t\t\t\tfriends: firebase.firestore.FieldValue.arrayUnion(friendID),\n\t\t\t});\n\t};\n\n\treturn (\n\t\t<div className=\"add-friend\">\n\t\t\t<AddIcon onClick={addFriendToList} />\n\t\t\t<span className=\"tooltiptext\">Add as friend</span>\n\t\t</div>\n\t);\n}\n\nexport default AddFriend;\n","// React and state imports\nimport React, { useState, useEffect, useRef, Fragment } from \"react\";\nimport { useParams, useHistory } from \"react-router-dom\";\n\n// Firebase and state imports\nimport { useStateValue } from \"./hooks+context/StateProvider\";\nimport { actionTypes } from \"./hooks+context/reducer\";\nimport db from \"./firebase\";\n\n// Components\nimport Message from \"./Message\";\nimport ChatInput from \"./ChatInput\";\nimport WhisperInput from \"./WhisperInput\";\nimport AddFriend from \"./AddFriend\";\n\n// Style\nimport \"./Chat.css\";\n\n// Material UI\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport { Avatar } from \"@material-ui/core\";\n\n// Material UI styles\nconst useStyles = makeStyles((theme) => ({\n\ttypography: {\n\t\tpadding: theme.spacing(2),\n\t},\n\tbar__button: {\n\t\tmargin: 0,\n\t\tposition: \"relative\",\n\t\tbackgroundColor: \"#311f34\",\n\t\tcolor: \"#FFDC14\",\n\t\t\"&:hover\": {\n\t\t\tbackground: \"#FFDC14\",\n\t\t\tcolor: \"#311f34\",\n\t\t},\n\t},\n}));\n\n// Primary Chat function\nfunction Chat() {\n\t// Data layer and hooks\n\tconst [{ user }, dispatch] = useStateValue();\n\tconst { barId, tableId } = useParams();\n\tconst history = useHistory();\n\n\t// Local State\n\tconst [tableDetails, setTableDetails] = useState(null);\n\tconst [tableMessages, setTableMessages] = useState([]);\n\tconst [tableUsers, setTableUsers] = useState([]);\n\tconst [barName, setBarName] = useState([]);\n\tconst [friendsArray, setFriendsArray] = useState([]);\n\n\t// Material UI Styles\n\tconst classes = useStyles();\n\n\t// --------------------------------------------------------\n\t// For autoscrolling to bottom of chat\n\tconst messagesEndRef = useRef(null);\n\n\tconst scrollToBottom = () => {\n\t\tmessagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\n\t};\n\n\tuseEffect(scrollToBottom, [tableMessages]);\n\t// --------------------------------------------------------\n\t// For only loading contemporary messages\n\n\tconst joinTimestamp = new Date();\n\n\tconst twoMinAgo = new Date(joinTimestamp - 120000);\n\n\t// -------------------------------------------------------\n\n\tuseEffect(() => {\n\t\tdb.collection(\"users\")\n\t\t\t.doc(user.uid)\n\t\t\t.onSnapshot((snapshot) => {\n\t\t\t\tsetFriendsArray(snapshot.data().friends);\n\t\t\t});\n\t}, [user]);\n\n\t// For updating data\n\tuseEffect(() => {\n\t\t// Grab table details\n\t\tif (tableId) {\n\t\t\tdb.collection(\"bars\")\n\t\t\t\t.doc(barId)\n\t\t\t\t.collection(\"tables\")\n\t\t\t\t.doc(tableId)\n\t\t\t\t.onSnapshot((snapshot) => {\n\t\t\t\t\tsetTableDetails(snapshot.data());\n\t\t\t\t});\n\t\t}\n\n\t\t// Load the messages that were sent to you either by general or whisper chat\n\t\tdb.collection(\"bars\")\n\t\t\t.doc(barId)\n\t\t\t.collection(\"tables\")\n\t\t\t.doc(tableId)\n\t\t\t.collection(\"messages\")\n\t\t\t.where(\"recipient\", \"array-contains-any\", [\"all\", user.uid])\n\t\t\t.where(\"timestamp\", \">=\", twoMinAgo)\n\t\t\t.orderBy(\"timestamp\", \"asc\")\n\t\t\t.onSnapshot((snapshot) => {\n\t\t\t\tsetTableMessages(snapshot.docs.map((doc) => doc.data()));\n\t\t\t});\n\n\t\t// Add yourself to the list of users at table\n\t\tdb.collection(\"bars\")\n\t\t\t.doc(barId)\n\t\t\t.collection(\"tables\")\n\t\t\t.doc(tableId)\n\t\t\t.collection(\"usersAtTable\")\n\t\t\t.doc(user.uid)\n\t\t\t.set({\n\t\t\t\tname: user?.displayName,\n\t\t\t\tphotoURL: user?.photoURL,\n\t\t\t\tuid: user?.uid,\n\t\t\t\tisTyping: false,\n\t\t\t});\n\n\t\t// \tLoad the list of users at table\n\t\tdb.collection(\"bars\")\n\t\t\t.doc(barId)\n\t\t\t.collection(\"tables\")\n\t\t\t.doc(tableId)\n\t\t\t.collection(\"usersAtTable\")\n\t\t\t.onSnapshot((snapshot) => {\n\t\t\t\tsetTableUsers(snapshot.docs.map((doc) => doc.data()));\n\t\t\t});\n\n\t\t// Grab bar name\n\t\tdb.collection(\"bars\")\n\t\t\t.doc(barId)\n\t\t\t.onSnapshot((snapshot) => {\n\t\t\t\tsetBarName(snapshot.data());\n\t\t\t});\n\n\t\t// Set bar id and table id in data layer\n\t\tdispatch({\n\t\t\ttype: actionTypes.SET_BAR_AND_TABLE,\n\t\t\tat_table: tableId,\n\t\t\tat_bar: barId,\n\t\t});\n\t}, [tableId]); // End of UseEffect hook\n\n\t// Remove yourself from the table users list when cleanly leaving the table\n\tconst leaveTable = () => {\n\t\tconst userToDelete = db\n\t\t\t.collection(\"bars\")\n\t\t\t.doc(barId)\n\t\t\t.collection(\"tables\")\n\t\t\t.doc(tableId)\n\t\t\t.collection(\"usersAtTable\")\n\t\t\t.doc(user.uid)\n\t\t\t.delete();\n\t\thistory.push(`/bar/${barId}`);\n\t};\n\n\t// Render the chat\n\treturn (\n\t\t<div className=\"table_chat\">\n\t\t\t{/* -------- Users at table sidebar -------- */}\n\t\t\t<div className=\"table_users\">\n\t\t\t\t<div className=\"table_users_header\">\n\t\t\t\t\t<h3>{barName.name}</h3>\n\t\t\t\t</div>\n\n\t\t\t\t{/* YOU */}\n\t\t\t\t<div className=\"table_users_list table_you\">\n\t\t\t\t\t<h4>Welcome!</h4>\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li className=\"userName\">\n\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\tclassName=\"header__avatar\"\n\t\t\t\t\t\t\t\t\talt={user.displayName}\n\t\t\t\t\t\t\t\t\tsrc={user.photoURL}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<h5>{user.displayName}</h5>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</Fragment>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Friends List */}\n\t\t\t\t<div className=\"table_users_list table_friends\">\n\t\t\t\t\t{friendsArray?.length > 0 && <h4>Friends here</h4>}\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t{tableUsers.map(({ name, photoURL, uid, isTyping }) => (\n\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t{friendsArray?.includes(uid) ? (\n\t\t\t\t\t\t\t\t\t<li className=\"userName\">\n\t\t\t\t\t\t\t\t\t\t<WhisperInput\n\t\t\t\t\t\t\t\t\t\t\tbarId={barId}\n\t\t\t\t\t\t\t\t\t\t\ttableId={tableId}\n\t\t\t\t\t\t\t\t\t\t\tuid={uid}\n\t\t\t\t\t\t\t\t\t\t\trecipientName={name}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"header__avatar\"\n\t\t\t\t\t\t\t\t\t\t\talt={name}\n\t\t\t\t\t\t\t\t\t\t\tsrc={photoURL}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<h5>{name}</h5>\n\t\t\t\t\t\t\t\t\t\t{isTyping ? (\n\t\t\t\t\t\t\t\t\t\t\t<i>\n\t\t\t\t\t\t\t\t\t\t\t\t<h5>is typing...</h5>\n\t\t\t\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<p></p>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<p></p>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Strangers List */}\n\t\t\t\t<div className=\"table_users_list table_strangers\">\n\t\t\t\t\t{tableUsers && <h4>Others hanging out</h4>}\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t{tableUsers.map(({ name, photoURL, uid, isTyping }) => (\n\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t{!friendsArray?.includes(uid) && uid != user.uid ? (\n\t\t\t\t\t\t\t\t\t<li className=\"userName\">\n\t\t\t\t\t\t\t\t\t\t<WhisperInput\n\t\t\t\t\t\t\t\t\t\t\tbarId={barId}\n\t\t\t\t\t\t\t\t\t\t\ttableId={tableId}\n\t\t\t\t\t\t\t\t\t\t\tuid={uid}\n\t\t\t\t\t\t\t\t\t\t\trecipientName={name}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"header__avatar\"\n\t\t\t\t\t\t\t\t\t\t\talt={name}\n\t\t\t\t\t\t\t\t\t\t\tsrc={photoURL}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<h5>{name}</h5>\n\t\t\t\t\t\t\t\t\t\t<AddFriend friendID={uid} />\n\t\t\t\t\t\t\t\t\t\t{isTyping ? (\n\t\t\t\t\t\t\t\t\t\t\t<i>\n\t\t\t\t\t\t\t\t\t\t\t\t<h5>is typing...</h5>\n\t\t\t\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<p></p>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<p></p>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* -------- Chat window -------- */}\n\t\t\t<div className=\"chat\">\n\t\t\t\t<div className=\"chat__header\">\n\t\t\t\t\t<div className=\"chat__headerLeft\">\n\t\t\t\t\t\t<h4 className=\"chat__channelName\">\n\t\t\t\t\t\t\t<strong>Hanging at {tableDetails?.name}</strong>\n\t\t\t\t\t\t</h4>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"chat__headerRight\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclassName={classes.bar__button}\n\t\t\t\t\t\t\tdisableFocusRipple={true}\n\t\t\t\t\t\t\tdisableRipple={true}\n\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\tonClick={leaveTable}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tLeave Table\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"chat__messages\">\n\t\t\t\t\t{tableMessages.map((doc) => (\n\t\t\t\t\t\t<Message\n\t\t\t\t\t\t\tiSent={doc.user === user.displayName ? true : false}\n\t\t\t\t\t\t\twhisper={doc.recipient[0] !== \"all\" ? true : false}\n\t\t\t\t\t\t\tmessage={doc.message}\n\t\t\t\t\t\t\twhisper_part1={doc.whisper_part1}\n\t\t\t\t\t\t\twhisper_part2={doc.whisper_part2}\n\t\t\t\t\t\t\ttimestamp={doc.timestamp}\n\t\t\t\t\t\t\tuser={doc.user}\n\t\t\t\t\t\t\tuserImage={doc.userImage}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"scroll-spacer\" ref={messagesEndRef} />\n\n\t\t\t\t<ChatInput\n\t\t\t\t\tbarId={barId}\n\t\t\t\t\ttableId={tableId}\n\t\t\t\t\ttableNumber={tableDetails?.name}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Chat;\n","export default __webpack_public_path__ + \"static/media/logo2.88c1d0ef.png\";","// React and hooks\nimport React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useStateValue } from \"./hooks+context/StateProvider\";\nimport { actionTypes } from \"./hooks+context/reducer\";\n\n// Geolocation module\nimport HaversineGeolocation from \"haversine-geolocation\";\n\n// Firebase\nimport { auth, provider } from \"./firebase\";\n\n// Styling\nimport \"./Login.css\";\nimport { Button } from \"@material-ui/core\";\nimport logo from \"./images/logo2.png\";\nimport cocktail from \"./images/cocktail.png\";\n\n// Primary Login function\nfunction Login() {\n\tconst [state, dispatch] = useStateValue();\n\tconst history = useHistory();\n\n\t// Use Google Authentication to sign in a user\n\tconst signIn = () => {\n\t\tauth\n\t\t\t.signInWithPopup(provider)\n\t\t\t.then((result) => {\n\t\t\t\tconst idToken = result.user.uid;\n\n\t\t\t\t// Grab users location\n\t\t\t\tHaversineGeolocation.isGeolocationAvailable().then((data) => {\n\t\t\t\t\tconst userLocation = {\n\t\t\t\t\t\tlatitude: data.coords.latitude,\n\t\t\t\t\t\tlongitude: data.coords.longitude,\n\t\t\t\t\t};\n\t\t\t\t\t// fire off dispatch only once we have the lat/lon data\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: actionTypes.SET_USER,\n\t\t\t\t\t\tuser: result.user,\n\t\t\t\t\t\tlocation: userLocation,\n\t\t\t\t\t\tidToken: idToken,\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\thistory.replace(`/`);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\talert(error.message);\n\t\t\t});\n\t};\n\n\t// Render Login\n\treturn (\n\t\t<div className=\"login\">\n\t\t\t<img src={logo} width={1200} />\n\t\t\t<div className=\"login__container\">\n\t\t\t\t<img classname=\"icon\" src={cocktail} />\n\t\t\t\t<h1>Welcome to Virtual Bar</h1>\n\t\t\t\t<Button id=\"neon-btn\" className=\"btn two\" onClick={signIn}>\n\t\t\t\t\tSign in with Google\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Login;\n","// React and hooks\nimport React from \"react\";\nimport { useStateValue } from \"./hooks+context/StateProvider\";\nimport { useHistory } from \"react-router-dom\";\n\n// Firebase\nimport db from \"./firebase\";\n\n// Material UI\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActionArea from \"@material-ui/core/CardActionArea\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardMedia from \"@material-ui/core/CardMedia\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\n\n// Custom CSS\nimport \"./BarListing.css\";\n\n// Material UI Styles\nconst useStyles = makeStyles({\n\troot: {\n\t\tmaxWidth: 345,\n\t\tminWidth: 345,\n\t\tmarginTop: 15,\n\t\tmarginBottom: 15,\n\t\tbackgroundColor: \"#311f34\",\n\t\tboxShadow: \"4px 4px 5px 0px rgba(50, 50, 50, 0.9)\",\n\t},\n\tmedia: {\n\t\theight: 250,\n\t},\n\n\tbar__button: {\n\t\tcolor: \"#FFDC14\",\n\t\t\"&:hover\": {\n\t\t\tbackground: \"#FFDC14\",\n\t\t\tcolor: \"#311f34\",\n\t\t\tboxShadow: \"10px 10px 99px 6px #ffdc14\",\n\t\t},\n\t},\n});\n\n// Primary Bar Listing function\nfunction BarListing({ title, id, description, barCreatorId, photo }) {\n\tconst history = useHistory();\n\tconst [{ idToken }] = useStateValue();\n\tconst classes = useStyles();\n\n\t// Route to a bar\n\tconst selectChannel = () => {\n\t\tif (id) {\n\t\t\thistory.push(`/bar/${id}`);\n\t\t} else {\n\t\t\thistory.push(title);\n\t\t}\n\t};\n\n\t// Check if bar belongs to user\n\tconst userCanDelete = (barIdToken, userIdToken) => {\n\t\tif (barIdToken === userIdToken) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t// Delete a bar\n\tconst deleteBar = () => {\n\t\tif (window.confirm(\"Are you sure you want to delete the bar?\")) {\n\t\t\tdb.collection(\"bars\").doc(id).delete();\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t};\n\n\t// Render Bar Listing\n\treturn (\n\t\t<Card className={classes.root}>\n\t\t\t<CardActionArea onClick={selectChannel}>\n\t\t\t\t<CardMedia\n\t\t\t\t\tclassName={classes.media}\n\t\t\t\t\timage={\n\t\t\t\t\t\tphoto\n\t\t\t\t\t\t\t? photo\n\t\t\t\t\t\t\t: \"https://images.unsplash.com/photo-1575444758702-4a6b9222336e?ixid=MXwxMjA3fDB8MHxzZWFyY2h8M3x8YmFyfGVufDB8fDB8&ixlib=rb-1.2.1&w=1000&q=80\"\n\t\t\t\t\t}\n\t\t\t\t\ttitle={ title }\n\t\t\t\t/>\n\t\t\t\t<CardContent>\n\t\t\t\t\t<Typography gutterBottom variant=\"h5\" component=\"h2\">\n\t\t\t\t\t\t{title}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n\t\t\t\t\t\t{description}\n\t\t\t\t\t</Typography>\n\t\t\t\t</CardContent>\n\t\t\t</CardActionArea>\n\t\t\t<CardActions>\n\t\t\t\t<Button\n\t\t\t\t\tclassName={classes.bar__button}\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\tonClick={selectChannel}\n\t\t\t\t>\n\t\t\t\t\tJoin Bar\n\t\t\t\t</Button>\n\t\t\t\t{userCanDelete(barCreatorId, idToken) && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName={classes.bar__button}\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tonClick={deleteBar}\n\t\t\t\t\t>\n\t\t\t\t\t\tDelete Bar\n\t\t\t\t\t</Button>\n\t\t\t\t)}\n\t\t\t</CardActions>\n\t\t</Card>\n\t);\n}\n\nexport default BarListing;\n","// React\nimport React, { useState, useEffect, Fragment } from \"react\";\nimport { useStateValue } from \"./hooks+context/StateProvider\";\nimport { actionTypes } from \"./hooks+context/reducer\";\nimport firebase from \"firebase\";\nimport db from \"./firebase\";\nimport HaversineGeolocation from \"haversine-geolocation\";\nimport BarListing from \"./BarListing\";\n\n// Material UI\nimport TextField from \"@material-ui/core/TextField\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Popover from \"@material-ui/core/Popover\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\nimport Breadcrumbs from \"@material-ui/core/Breadcrumbs\";\nimport Link from \"@material-ui/core/Link\";\nimport HomeIcon from \"@material-ui/icons/Home\";\n\n// Custom Styles\nimport \"./Street.css\";\nimport \"./BarListing.css\";\n\n// Material UI Styles\nconst useStyles = makeStyles((theme) => ({\n\troot: {\n\t\t\"& > *\": {\n\t\t\tmargin: theme.spacing(1),\n\t\t\twidth: \"25ch\",\n\t\t},\n\t},\n\ttypography: {\n\t\tpadding: theme.spacing(2),\n\t},\n\tlink: {\n\t\tdisplay: \"flex\",\n\t},\n\ticon: {\n\t\tmarginRight: theme.spacing(0.5),\n\t\twidth: 20,\n\t\theight: 20,\n\t},\n\tbar__button: {\n\t\tbackgroundColor: \"#311f34\",\n\t\tcolor: \"#FFDC14\",\n\t\t\"&:hover\": {\n\t\t\tbackground: \"#FFDC14\",\n\t\t\tcolor: \"#311f34\",\n\t\t},\n\t},\n\n}));\n\nfunction Street() {\n\tconst [channels, setChannels] = useState([]);\n\tconst [{ userLocation, idToken }, dispatch] = useStateValue();\n\tconst [anchorEl, setAnchorEl] = useState(null);\n\tconst [input, setInput] = useState(\"\");\n\tconst [desc, setDesc] = useState(\"\");\n\tconst [imageUrl, setImageUrl] = useState(\"\");\n\n\t// Material UI\n\tconst classes = useStyles();\n\n\t// Load all bars from db\n\tuseEffect(() => {\n\t\tdb.collection(\"bars\")\n\t\t\t.orderBy(\"name\", \"asc\")\n\t\t\t.onSnapshot((snapshot) => {\n\t\t\t\tsetChannels(\n\t\t\t\t\tsnapshot.docs.map((doc) => ({\n\t\t\t\t\t\tid: doc.id,\n\t\t\t\t\t\tname: doc.data().name,\n\t\t\t\t\t\tcreatorId: doc.data().creatorId,\n\t\t\t\t\t\tphoto: doc.data().photo_url,\n\t\t\t\t\t\tlocation: {\n\t\t\t\t\t\t\tlatitude: doc.data().location.latitude,\n\t\t\t\t\t\t\tlongitude: doc.data().location.longitude,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdescription: doc.data().description,\n\t\t\t\t\t}))\n\t\t\t\t);\n\t\t\t});\n\n\t\tdispatch({\n\t\t\ttype: actionTypes.LEAVE_BAR_OR_TABLE,\n\t\t\tat_table: null,\n\t\t\tat_bar: null,\n\t\t});\n\t}, []);\n\n\t// flag for rendering information telling user no bars are near them\n\tlet atLeastOneBar;\n\n\tconst closeProximityToUser = (location) => {\n\t\t// user location [0], bar location [1]\n\t\tconst locations = [\n\t\t\t{\n\t\t\t\tlatitude: userLocation.latitude,\n\t\t\t\tlongitude: userLocation.longitude,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlatitude: location.latitude,\n\t\t\t\tlongitude: location.longitude,\n\t\t\t},\n\t\t];\n\t\t// calculate distance in km\n\t\tconst distanceBetween = HaversineGeolocation.getDistanceBetween(\n\t\t\tlocations[0],\n\t\t\tlocations[1]\n\t\t);\n\t\tconst closeProximity = distanceBetween <= 1000 ? true : false;\n\t\t// make sure to change this back to <= 20 for deployment\n\t\treturn closeProximity;\n\t};\n\n\tconst addBar = (event) => {\n\t\tevent.preventDefault();\n\n\t\tif (!input) {\n\t\t\talert(\"You must give your bar a name\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (input) {\n\t\t\tdb.collection(\"bars\").add({\n\t\t\t\ttable_size: 6,\n\t\t\t\tcapacity: 60,\n\t\t\t\tname: input,\n\t\t\t\tcreatorId: idToken,\n\t\t\t\tdescription: desc ? desc : \"Your standard generic watering hole\",\n\t\t\t\tphoto_url: imageUrl ? imageUrl : null,\n\t\t\t\tlocation: new firebase.firestore.GeoPoint(\n\t\t\t\t\tuserLocation.latitude,\n\t\t\t\t\tuserLocation.longitude\n\t\t\t\t),\n\t\t\t});\n\t\t}\n\t\tsetImageUrl(\"\");\n\t\tsetInput(\"\");\n\t\tsetDesc(\"\");\n\t\thandleClose();\n\t};\n\n\t// start of code for table name popup input\n\t// ----------------------------------------\n\n\tconst handleClick = (event) => {\n\t\tsetAnchorEl(event.currentTarget);\n\t};\n\n\tconst handleClose = () => {\n\t\tsetAnchorEl(null);\n\t};\n\n\tconst open = Boolean(anchorEl);\n\tconst id = open ? \"simple-popover\" : undefined;\n\t// --------------------------------------\n\t// end of code for table name popup input\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<div className=\"street\">\n\t\t\t\t<Breadcrumbs aria-label=\"breadcrumb\" className=\"breadCrumbs\">\n\t\t\t\t\t<Link color=\"inherit\" className={classes.link}>\n\t\t\t\t\t\t<HomeIcon className={classes.icon} />\n\t\t\t\t\t\tBars Nearby\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName={`${classes.bar__button} \"button__open_new_bar\"`}\n\t\t\t\t\t\tid=\"form_close\"\n\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tonClick={handleClick}\n\t\t\t\t\t\tdisableFocusRipple={true}\n\t\t\t\t\t\tdisableRipple={true}\n\t\t\t\t\t>\n\t\t\t\t\t\tOpen New Bar\n\t\t\t\t\t</Button>\n\t\t\t\t</Breadcrumbs>\n\t\t\t\t<Popover\n\t\t\t\t\tid={id}\n\t\t\t\t\topen={open}\n\t\t\t\t\tanchorEl={anchorEl}\n\t\t\t\t\tonClose={handleClose}\n\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\tvertical: \"bottom\",\n\t\t\t\t\t\thorizontal: \"center\",\n\t\t\t\t\t}}\n\t\t\t\t\ttransformOrigin={{\n\t\t\t\t\t\tvertical: \"top\",\n\t\t\t\t\t\thorizontal: \"center\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Typography className={classes.typography}>\n\t\t\t\t\t\t<form className={classes.root} noValidate autoComplete=\"off\">\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tid=\"outlined-basic\"\n\t\t\t\t\t\t\t\tlabel=\"Enter your bar's name\"\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tonChange={(event) => setInput(event.target.value)}\n\t\t\t\t\t\t\t\tvalue={input}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tid=\"outlined-basic\"\n\t\t\t\t\t\t\t\tlabel=\"Enter a description\"\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tonChange={(event) => setDesc(event.target.value)}\n\t\t\t\t\t\t\t\tvalue={desc}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tid=\"outlined-basic\"\n\t\t\t\t\t\t\t\tlabel=\"Enter an image URL\"\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tonChange={(event) => setImageUrl(event.target.value)}\n\t\t\t\t\t\t\t\tvalue={imageUrl}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tid=\"input__bar_box\"\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\tonClick={addBar}\n\t\t\t\t\t\t\t\t></button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</Typography>\n\t\t\t\t</Popover>\n\t\t\t\t<div className=\"bar_list\">\n\t\t\t\t\t{channels.map((channel) =>\n\t\t\t\t\t\tcloseProximityToUser(channel.location) ? (\n\t\t\t\t\t\t\t((atLeastOneBar = true),\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t<BarListing\n\t\t\t\t\t\t\t\t\tkey={channel.id}\n\t\t\t\t\t\t\t\t\ttitle={channel.name}\n\t\t\t\t\t\t\t\t\tid={channel.id}\n\t\t\t\t\t\t\t\t\tbarCreatorId={channel.creatorId}\n\t\t\t\t\t\t\t\t\tdescription={channel.description}\n\t\t\t\t\t\t\t\t\tphoto={channel.photo}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t))\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<></>\n\t\t\t\t\t\t)\n\t\t\t\t\t)}\n\t\t\t\t\t{!atLeastOneBar && (\n\t\t\t\t\t\t<h1 id=\"test__no_bar\">\n\t\t\t\t\t\t\tSorry, there no bars are near you. Start your own!\n\t\t\t\t\t\t</h1>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Fragment>\n\t);\n}\n\nexport default Street;\n","// React\nimport React, { useState, useEffect } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport db from \"./firebase\";\nimport { useStateValue } from \"./hooks+context/StateProvider\";\n\n// Materiul UI\nimport \"./Table.css\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActionArea from \"@material-ui/core/CardActionArea\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardMedia from \"@material-ui/core/CardMedia\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\n\n// Material UI styles override\nconst useStyles = makeStyles({\n\troot: {\n\t\tmaxWidth: 345,\n\t\tminWidth: 345,\n\t\tmarginTop: 15,\n\t\tmarginBottom: 15,\n\t\tbackgroundColor: \"#311f34\",\n\t\tboxShadow: \"4px 4px 5px 0px rgba(50, 50, 50, 0.9)\",\n\t},\n\tmedia: {\n\t\theight: 250,\n\t},\n\tbar__button: {\n\t\tcolor: \"#FFDC14\",\n\t\t\"&:hover\": {\n\t\t\tbackground: \"#FFDC14\",\n\t\t\tcolor: \"#311f34\",\n\t\t\tboxShadow: \"10px 10px 99px 6px #ffdc14\",\n\t\t},\n\t},\n});\n\n// Table component\nfunction Table({ id, name, tableCreatorId, customTableImage, description }) {\n\tconst { barId } = useParams();\n\tconst history = useHistory();\n\tconst [{ idToken }] = useStateValue();\n\tconst [usersPresent, setUsersPresent] = useState(null);\n\tconst classes = useStyles();\n\n\t// Check to see how many users are at a table\n\tuseEffect(() => {\n\t\tdb.collection(\"bars\")\n\t\t\t.doc(barId)\n\t\t\t.collection(\"tables\")\n\t\t\t.doc(id)\n\t\t\t.collection(\"usersAtTable\")\n\t\t\t.onSnapshot((snapshot) => {\n\t\t\t\tsetUsersPresent(snapshot.docs.map((doc) => doc.data()));\n\t\t\t});\n\t}, []);\n\n\t// Goto a table\n\tconst goToTable = () => {\n\t\thistory.push(`/bar/${barId}/table/${id}`);\n\t};\n\n\t// If user has authorization to delete a table\n\tconst userCanDelete = (tableIdToken, userIdToken) => {\n\t\treturn tableIdToken === userIdToken ? true : false;\n\t};\n\n\t// Delete table if authorized\n\tconst deleteTable = () => {\n\t\tif (window.confirm(\"Are you sure you want to delete your table?\")) {\n\t\t\tdb.collection(\"bars\").doc(barId).collection(\"tables\").doc(id).delete();\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t};\n\n\treturn (\n\t\t<Card className={classes.root}>\n\t\t\t<CardActionArea onClick={goToTable}>\n\t\t\t\t<CardMedia\n\t\t\t\t\tclassName={classes.media}\n\t\t\t\t\timage={\n\t\t\t\t\t\tcustomTableImage\n\t\t\t\t\t\t\t? customTableImage\n\t\t\t\t\t\t\t: \"https://images.unsplash.com/photo-1575444758702-4a6b9222336e?ixid=MXwxMjA3fDB8MHxzZWFyY2h8M3x8YmFyfGVufDB8fDB8&ixlib=rb-1.2.1&w=1000&q=80\"\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<CardContent>\n\t\t\t\t\t<Typography gutterBottom variant=\"h5\" component=\"h2\">\n\t\t\t\t\t\t{name}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<Typography variant=\"body1\" color=\"textSecondary\" component=\"p\">\n\t\t\t\t\t\t{description}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n\t\t\t\t\t\t{`${usersPresent?.length} patron${\n\t\t\t\t\t\t\tusersPresent?.length === 1 ? \"\" : \"s\"\n\t\t\t\t\t\t} at this table`}\n\t\t\t\t\t</Typography>\n\t\t\t\t</CardContent>\n\t\t\t</CardActionArea>\n\t\t\t<CardActions>\n\t\t\t\t<Button\n\t\t\t\t\tclassName={classes.bar__button}\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\tonClick={goToTable}\n\t\t\t\t>\n\t\t\t\t\tJoin Table\n\t\t\t\t</Button>\n\t\t\t\t{usersPresent?.length === 0 && userCanDelete(tableCreatorId, idToken) && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName={classes.bar__button}\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tonClick={deleteTable}\n\t\t\t\t\t>\n\t\t\t\t\t\tDelete Table\n\t\t\t\t\t</Button>\n\t\t\t\t)}\n\t\t\t</CardActions>\n\t\t</Card>\n\t);\n}\n\nexport default Table;\n","// React and hooks\nimport React, { useState, useEffect } from \"react\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { useStateValue } from \"./hooks+context/StateProvider\";\nimport { actionTypes } from \"./hooks+context/reducer\";\n\n// Firebase\nimport db from \"./firebase\";\n\n// Components\nimport Table from \"./Table\";\n\n// Material UI\nimport TextField from \"@material-ui/core/TextField\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Popover from \"@material-ui/core/Popover\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\nimport Breadcrumbs from \"@material-ui/core/Breadcrumbs\";\nimport Link from \"@material-ui/core/Link\";\nimport HomeIcon from \"@material-ui/icons/Home\";\nimport LocalBarIcon from '@material-ui/icons/LocalBar';\n\n// Custom CSS\nimport \"./Bar.css\";\n\nfunction Bar() {\n\tconst [{ idToken }, dispatch] = useStateValue();\n\tconst history = useHistory();\n\n\tconst { barId } = useParams();\n\tconst [barDetails, setBarDetails] = useState(null);\n\tconst [tables, setTables] = useState([]);\n\tconst [desc, setDesc] = useState(\"\");\n\tconst [anchorEl, setAnchorEl] = useState(null);\n\tconst [input, setInput] = useState(\"\");\n\tconst [imageUrl, setImageUrl] = useState(\"\");\n\n\tuseEffect(() => {\n\t\t// Set the bar details by bar id\n\t\tif (barId) {\n\t\t\tdb.collection(\"bars\")\n\t\t\t\t.doc(barId)\n\t\t\t\t.onSnapshot((snapshot) => setBarDetails(snapshot.data()));\n\t\t}\n\n\t\t// Load the tables available in your area\n\t\tdb.collection(\"bars\")\n\t\t\t.doc(barId)\n\t\t\t.collection(\"tables\")\n\t\t\t.orderBy(\"name\", \"asc\")\n\t\t\t.onSnapshot((snapshot) =>\n\t\t\t\tsetTables(\n\t\t\t\t\tsnapshot.docs.map((doc) => ({\n\t\t\t\t\t\tid: doc.id,\n\t\t\t\t\t\tname: doc.data().name,\n\t\t\t\t\t\tcreatorId: doc.data().creatorId,\n\t\t\t\t\t\tcustomTableImage: doc.data().customTableImage,\n\t\t\t\t\t\tdescription: doc.data().description,\n\t\t\t\t\t}))\n\t\t\t\t)\n\t\t\t);\n\n\t\t// Update data layer\n\t\tdispatch({\n\t\t\ttype: actionTypes.LEAVE_BAR_OR_TABLE,\n\t\t\tat_bar: barId,\n\t\t\tat_table: null,\n\t\t});\n\t}, [barId]);\n\n\t// Reroute when cleanly exiting bar back to street\n\tconst leaveBar = () => {\n\t\thistory.push(\"/\");\n\t};\n\n\t// Create a new table\n\tconst addTable = (event) => {\n\t\tevent.preventDefault();\n\n\t\tconst randomPhrase = [\n\t\t\t\"Welcome to Deh Bar-Bar\",\n\t\t\t\"Discussing Michelle Oboma's arms\",\n\t\t\t\"Bar Bar Binks\",\n\t\t\t\"What is this? A table for ants!?\",\n\t\t\t\"Awwwwwwlrighty then!\",\n\t\t\t\"Join knights who say 'NI!'\",\n\t\t\t\"How about that Limp Bizkit?\",\n\t\t\t\"Do you like things and stuff? We do!\",\n\t\t\t\"Sharks & frickin' laser beams\",\n\t\t\t\"Go for Broke, or something....\",\n\t\t\t\"I ate a sock cuz peeps on the Net told me to\",\n\t\t\t\"They drank life before spitting it out\",\n\t\t\t\"Come on Barbie let's go party!\",\n\t\t\t\"Shenanigans Shenanigans Shenanigans Shenanigans, \",\n\t\t\t\"The blue parrot drove by the hitchhiking mongoose\",\n\t\t\t\"Flying fish flew by the space station\",\n\t\t\t\"#Drunk #Drunk #Drunk #Drunk #Drunk #Drunk\",\n\t\t\t\"Girls, Girls, Girls! - Motley Crew 🤟🎶\",\n\t\t\t\"Tomorrow is a storyteller without equal\",\n\t\t\t\"Insignificance loves to love\",\n\t\t\t\"The legend of the raven's roar visits Japan in the winter\",\n\t\t];\n\n\t\tif (!input) {\n\t\t\talert(\"Your table must have a name\");\n\t\t\treturn;\n\t\t} else {\n\t\t\tdb.collection(\"bars\")\n\t\t\t\t.doc(barId)\n\t\t\t\t.collection(\"tables\")\n\t\t\t\t.add({\n\t\t\t\t\tname: input,\n\t\t\t\t\tcreatorId: idToken,\n\t\t\t\t\tcustomTableImage: imageUrl ? imageUrl : null,\n\t\t\t\t\tdescription: desc\n\t\t\t\t\t\t? desc\n\t\t\t\t\t\t: randomPhrase[Math.floor(Math.random() * randomPhrase.length)],\n\t\t\t\t});\n\t\t}\n\n\t\tsetInput(\"\");\n\t\tsetDesc(\"\");\n\t\tsetImageUrl(\"\");\n\t\thandleClose();\n\t};\n\n\t// start of code for table name popup input\n\t// ----------------------------------------\n\tconst useStyles = makeStyles((theme) => ({\n\t\troot: {\n\t\t\t\"& > *\": {\n\t\t\t\tmargin: theme.spacing(1),\n\t\t\t\twidth: \"25ch\",\n\t\t\t},\n\t\t},\n\t\ttypography: {\n\t\t\tpadding: theme.spacing(2),\n\t\t},\n\t\tlink: {\n\t\t\tdisplay: \"flex\",\n\t\t},\n\t\ticon: {\n\t\t\tmarginRight: theme.spacing(0.5),\n\t\t\twidth: 20,\n\t\t\theight: 20,\n\t\t},\n\t\tbar__button: {\n\t\t\tbackgroundColor: \"#311f34\",\n\t\t\tcolor: \"#FFDC14\",\n\t\t\t\"&:hover\": {\n\t\t\t\tbackground: \"#FFDC14\",\n\t\t\t\tcolor: \"#311f34\",\n\t\t\t},\n\t\t},\n\t}));\n\n\tconst classes = useStyles();\n\n\tconst handleClick = (event) => {\n\t\tsetAnchorEl(event.currentTarget);\n\t};\n\n\tconst handleClose = () => {\n\t\tsetAnchorEl(null);\n\t};\n\n\tconst open = Boolean(anchorEl);\n\tconst id = open ? \"simple-popover\" : undefined;\n\t// --------------------------------------\n\t// end of code for table name popup input\n\n\t// Render component\n\treturn (\n\t\t<div className=\"street\">\n\t\t\t<Breadcrumbs aria-label=\"breadcrumb\" className=\"breadCrumbs\">\n\t\t\t\t<Link color=\"inherit\" onClick={leaveBar} className={classes.link}>\n\t\t\t\t\t<HomeIcon className={classes.icon} />\n\t\t\t\t\tBars Nearby\n\t\t\t\t</Link>\n\t\t\t\t<Link color=\"inherit\" onClick={leaveBar} className={classes.link}>\n\t\t\t\t\t<LocalBarIcon className={classes.icon} />\n\t\t\t\t\t{barDetails?.name}\n\t\t\t\t</Link>\n\t\t\t\t<Button\n\t\t\t\t\tclassName={classes.bar__button}\n\t\t\t\t\tid=\"form_close\"\n\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\tonClick={handleClick}\n\t\t\t\t\tdisableFocusRipple={true}\n\t\t\t\t\tdisableRipple={true}\n\t\t\t\t>\n\t\t\t\t\tGrab a table\n\t\t\t\t</Button>\n\t\t\t</Breadcrumbs>\n\t\t\t<Popover\n\t\t\t\tid={id}\n\t\t\t\topen={open}\n\t\t\t\tanchorEl={anchorEl}\n\t\t\t\tonClose={handleClose}\n\t\t\t\tanchorOrigin={{\n\t\t\t\t\tvertical: \"bottom\",\n\t\t\t\t\thorizontal: \"center\",\n\t\t\t\t}}\n\t\t\t\ttransformOrigin={{\n\t\t\t\t\tvertical: \"top\",\n\t\t\t\t\thorizontal: \"center\",\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Typography className={classes.typography}>\n\t\t\t\t\t<form className={classes.root} noValidate autoComplete=\"off\">\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tid=\"outlined-basic\"\n\t\t\t\t\t\t\tlabel=\"Enter your table's name\"\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\tonChange={(event) => setInput(event.target.value)}\n\t\t\t\t\t\t\tvalue={input}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tid=\"outlined-basic\"\n\t\t\t\t\t\t\tlabel=\"Enter a short description\"\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\tonChange={(event) => setDesc(event.target.value)}\n\t\t\t\t\t\t\tvalue={desc}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tid=\"outlined-basic\"\n\t\t\t\t\t\t\tlabel=\"Enter an image URL\"\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\tonChange={(event) => setImageUrl(event.target.value)}\n\t\t\t\t\t\t\tvalue={imageUrl}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tid=\"input__bar_box\"\n\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\tonClick={addTable}\n\t\t\t\t\t\t\t></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t</Typography>\n\t\t\t</Popover>\n\t\t\t<div className=\"table_list\">\n\t\t\t\t{tables.map((table) => (\n\t\t\t\t\t<Table\n\t\t\t\t\t\tkey={table.id}\n\t\t\t\t\t\tid={table.id}\n\t\t\t\t\t\tname={table.name}\n\t\t\t\t\t\ttableCreatorId={table.creatorId}\n\t\t\t\t\t\tcustomTableImage={table.customTableImage}\n\t\t\t\t\t\tdescription={table.description}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Bar;\n","// React and hooks\nimport React from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport { useStateValue } from \"./hooks+context/StateProvider\";\nimport useStatus from \"./hooks+context/useStatus\";\nimport useBarTable from \"./hooks+context/useBarTable\";\n\n// Components\nimport Header from \"./Header\";\nimport Chat from \"./Chat\";\nimport Login from \"./Login\";\nimport Street from \"./Street\";\nimport Bar from \"./Bar\";\n\n// Styling\nimport \"./App.css\";\n\n// Primary App function\nfunction App() {\n\t// Load current user from data layer\n\tconst [{ user }] = useStateValue();\n\n\t// Write users present Bar and Table to database\n\tuseBarTable();\n\n\t// Custom hook to set Realtime Database online/offline status\n\tuseStatus();\n\n\t// Render app with React Router\n\treturn (\n\t\t<div className=\"app\">\n\t\t\t<Router>\n\t\t\t\t{!user ? (\n\t\t\t\t\t<Login />\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Header />\n\t\t\t\t\t\t<div className=\"app__body\">\n\t\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t\t<Route path=\"/bar/:barId/table/:tableId\">\n\t\t\t\t\t\t\t\t\t<Chat />\n\t\t\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t\t\t<Route path=\"/bar/:barId\">\n\t\t\t\t\t\t\t\t\t<Bar />\n\t\t\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t\t\t<Route path=\"/\">\n\t\t\t\t\t\t\t\t\t<Street />\n\t\t\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</Router>\n\t\t</div>\n\t);\n}\n\nexport default App;\n","import { useEffect } from \"react\";\nimport db from \"../firebase\";\nimport { useStateValue } from \"./StateProvider\";\n\nexport default function useBarTable() {\n\tconst [{ user, at_bar, at_table, last_bar, last_table }] = useStateValue();\n\n\tlet at_bar_name;\n\tlet at_table_name;\n\n\tuseEffect(async () => {\n\t\tif (user) {\n\t\t\tif (at_bar) {\n\t\t\t\tconst snap = await db.collection(\"bars\").doc(at_bar).get();\n\t\t\t\tat_bar_name = snap.data().name;\n\t\t\t} else {\n\t\t\t\tat_bar_name = null;\n\t\t\t}\n\n\t\t\tif (at_table) {\n\t\t\t\tconst snap = await db\n\t\t\t\t\t.collection(\"bars\")\n\t\t\t\t\t.doc(at_bar)\n\t\t\t\t\t.collection(\"tables\")\n\t\t\t\t\t.doc(at_table)\n\t\t\t\t\t.get();\n\t\t\t\tat_table_name = snap.data().name;\n\t\t\t} else {\n\t\t\t\tat_table_name = null;\n\t\t\t}\n\n\t\t\tdb.collection(\"users\").doc(user.uid).update({\n\t\t\t\tat_bar: at_bar,\n\t\t\t\tat_bar_name: at_bar_name,\n\t\t\t\tat_table: at_table,\n\t\t\t\tat_table_name: at_table_name,\n\t\t\t\tlast_bar: last_bar,\n\t\t\t\tlast_table: last_table,\n\t\t\t});\n\n\t\t\tif (!at_table && last_table) {\n\t\t\t\tdb.collection(\"bars\")\n\t\t\t\t\t.doc(last_bar)\n\t\t\t\t\t.collection(\"tables\")\n\t\t\t\t\t.doc(last_table)\n\t\t\t\t\t.collection(\"usersAtTable\")\n\t\t\t\t\t.doc(user.uid)\n\t\t\t\t\t.delete();\n\t\t\t}\n\t\t}\n\t}, [at_bar, at_table]);\n}\n","import { useEffect } from \"react\";\nimport firebase from \"firebase\";\nimport { useStateValue } from \"./StateProvider\";\n\nexport default function useStatus() {\n\tconst [{ user, last_bar, last_table }] = useStateValue();\n\t// Fetch the current user's ID from Firebase Authentication.\n\tconst uid = firebase.auth().currentUser?.uid;\n\n\tuseEffect(() => {\n\t\tfirebase\n\t\t\t.database()\n\t\t\t.ref(\"users/\" + uid)\n\t\t\t.update({\n\t\t\t\tlast_bar: last_bar,\n\t\t\t\tlast_table: last_table,\n\t\t\t});\n\t}, [last_table]);\n\n\tuseEffect(() => {\n\t\tif (user != null) {\n\t\t\t// ----------------------------------------------------------\n\t\t\t// Code to connect to Realtime database\n\n\t\t\t// Create a reference to this user's specific status node.\n\t\t\t// This is where we will store data about being online/offline.\n\t\t\tconst userStatusDatabaseRef = firebase.database().ref(\"/users/\" + uid);\n\n\t\t\t// Create two constants which we will write to the Realtime database when this device is offline or online.\n\t\t\tconst isOfflineForDatabase = {\n\t\t\t\tstate: \"offline\",\n\t\t\t\tlast_changed: firebase.database.ServerValue.TIMESTAMP,\n\t\t\t};\n\n\t\t\tconst isOnlineForDatabase = {\n\t\t\t\tstate: \"online\",\n\t\t\t\tlast_changed: firebase.database.ServerValue.TIMESTAMP,\n\t\t\t};\n\n\t\t\t// Create a reference to the special '.info/connected' path in Realtime Database.\n\t\t\t// Returns `true` when connected and `false` when disconnected.\n\t\t\tfirebase\n\t\t\t\t.database()\n\t\t\t\t.ref(\".info/connected\")\n\t\t\t\t.on(\"value\", function (snapshot) {\n\t\t\t\t\tif (snapshot.val() == false) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Use 'onDisconnect()'\n\t\t\t\t\t// Triggers when client has disconnected by closing the app, losing internet, etc.\n\t\t\t\t\tuserStatusDatabaseRef\n\t\t\t\t\t\t.onDisconnect()\n\t\t\t\t\t\t.update(isOfflineForDatabase)\n\t\t\t\t\t\t.then(function () {\n\t\t\t\t\t\t\tuserStatusDatabaseRef.update(isOnlineForDatabase);\n\t\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t// ------------------------------------------------------------------------\n\t\t\t// Update Cloud firestore's local cache...\n\n\t\t\tconst userStatusFirestoreRef = firebase.firestore().doc(\"/users/\" + uid);\n\n\t\t\t// Firestore uses a different server timestamp value\n\t\t\t// Instead create two more constants for Firestore state.\n\t\t\tconst isOfflineForFirestore = {\n\t\t\t\tstate: \"offline\",\n\t\t\t\tlast_changed: firebase.firestore.FieldValue.serverTimestamp(),\n\t\t\t};\n\n\t\t\tconst isOnlineForFirestore = {\n\t\t\t\tstate: \"online\",\n\t\t\t\tlast_changed: firebase.firestore.FieldValue.serverTimestamp(),\n\t\t\t};\n\n\t\t\tfirebase\n\t\t\t\t.database()\n\t\t\t\t.ref(\".info/connected\")\n\t\t\t\t.on(\"value\", function (snapshot) {\n\t\t\t\t\tif (snapshot.val() == false) {\n\t\t\t\t\t\t// Set Firestore's state to 'offline'. This ensures that our Firestore cache is awarevof the switch to 'offline.'\n\t\t\t\t\t\tuserStatusFirestoreRef.update(isOfflineForFirestore);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tuserStatusDatabaseRef\n\t\t\t\t\t\t.onDisconnect()\n\t\t\t\t\t\t.update(isOfflineForDatabase)\n\t\t\t\t\t\t.then(function () {\n\t\t\t\t\t\t\tuserStatusDatabaseRef.update(isOnlineForDatabase);\n\n\t\t\t\t\t\t\t// We'll also add Firestore set here for when we come online.\n\t\t\t\t\t\t\tuserStatusFirestoreRef.update(isOnlineForFirestore);\n\t\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t// -------------------------------------------------------------------\n\n\t\t\t// ****** CANNOT USE CODE BELOW WHEN STORING DATA IS USER COLLECTION INSTEAD OF STATUS\n\t\t\t// Check and console what what the client thinks the online status is\n\t\t\t// userStatusFirestoreRef.onSnapshot(function(doc) {\n\t\t\t// \tconst isOnline = doc.data().state == 'online';\n\t\t\t// \tconsole.log(\"Is online function says: \", isOnline)\n\t\t\t// });\n\t\t}\n\t}, [user]); // END OF USE EFFECT HOOK - UPDATES WHEN USER CHANGES (login/logout/disconnect)\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { StateProvider } from \"./hooks+context/StateProvider\";\nimport reducer, { initialState } from \"./hooks+context/reducer\";\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<StateProvider initialState={initialState} reducer={reducer}>\n\t\t\t<App />\n\t\t</StateProvider>\n\t</React.StrictMode>,\n\tdocument.getElementById(\"root\")\n);\n"],"sourceRoot":""}